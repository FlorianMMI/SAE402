<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Trouble VR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

    <!-- events -->
    <!-- <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script> -->

    <!-- intéractions avec les mains -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/super-hands@^3.0.5/dist/super-hands.min.js"></script>

    <!-- physiques -->
    <script
        src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.js"></script>

</head>

<body>
    <a-scene physics="gravity: -9.8; restitution: 0.8">

        <a-entity progressive-controls></a-entity>

        <a-light type="ambient" color="#FFF" intensity="0.5"></a-light>

        <a-entity id="rig" movement-controls="speed:01">
            <a-camera wasd-controls look-controls="pointerLockEnabled: true;" position="0 2.3 4">
                <a-entity cursor position="0 0 -0.01" geometry="primitive: sphere; radius: 0.00005"
                    material="color: #202020; shader: flat">
                </a-entity>
            </a-camera>
            <a-entity oculus-touch-controls="hand: left" thumbstick-controls></a-entity>
            <a-entity oculus-touch-controls="hand: right"></a-entity>
        </a-entity>

        <a-assets>
            <img id="ground" src="assets/parquet.jpg">
            <img id="grass" src="assets/grass.jpg">

            <a-asset-item id="tree-o" src="models/tree.obj"></a-asset-item>
            <a-asset-item id="tree-m" src="models/tree.mtl"></a-asset-item>

            <a-asset-item id="door-o" src="models/door.obj"></a-asset-item>
            <a-asset-item id="door-m" src="models/door.mtl"></a-asset-item>

            <a-asset-item id="fence-o" src="models/fence.obj"></a-asset-item>
            <a-asset-item id="fence-m" src="models/fence.mtl"></a-asset-item>

            <a-asset-item id="desk-o" src="models/desk.obj"></a-asset-item>
            <a-asset-item id="desk-m" src="models/desk.mtl"></a-asset-item>

            <a-asset-item id="deskchair-o" src="models/deskchair.obj"></a-asset-item>
            <a-asset-item id="deskchair-m" src="models/deskchair.mtl"></a-asset-item>
        </a-assets>

        <!-- SKY -->
        <a-sky color="#ADD8E6"></a-sky>
        <!-- light -->
        <a-entity
            light="intensity: 1.5; castShadow: true; shadowCameraTop: 8.97; shadowCameraRight: 13.66; shadowCameraLeft: -12.71"
            position="-11.66809 4.066 5.08364">
        </a-entity>

        <!-- GROUND -->
        <!-- a-box (plutot que a-plane) évite que les objets "flottent" un peu au dessus du sol -->
        <a-box src="#ground" position="-0.02" scale="14 20 0.04" repeat="7 7 0" rotation="-90 0 0"
            shadow="receive: true" material="roughness: 1" static-body></a-box>
        <a-plane src="#grass" position="-20 0 0" scale="25 50 1" repeat="5 5 1" rotation="-90 0 0"
            shadow="receive: true" material="roughness: 1" static-body></a-plane>
        <!-- material="shader:flat" -->

        <!-- CEILING -->
        <a-assets>
            <img id="ceiling" src="assets/ceiling.jpg">
        </a-assets>
        <a-box src="#ceiling" shadow="cast: true; receive: true" position="1.15 4.5 0" scale="17.2 19 0.1"
            repeat="1.5 1.5 1" rotation="-90 0 0" color="#DDDDDD" material="shader: flat" static-body></a-box>
        <!-- lights -->
        <!-- right back -->
        <a-box position="1.70 4.4 3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-box position="2.30 4.4 3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-light type="point" color="#FFF" position="2 4.35 3.5" scale="1 1 2"
            light="intensity: 0.35; castShadow: true; shadowRadius: 30"></a-light>
        <!-- right front -->
        <a-box position="1.70 4.4 -3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-box position="2.30 4.4 -3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-light type="point" color="#FFF" position="2 4.35 -3.5" scale="1 1 2"
            light="intensity: 0.35; castShadow: true; shadowRadius: 30"></a-light>
        <!-- left back -->
        <a-box position="-1.70 4.4 3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-box position="-2.30 4.4 3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-light type="point" color="#FFF" position="-2 4.35 3.5" scale="1 1 2"
            light="intensity: 0.35; castShadow: true; shadowRadius: 30"></a-light>
        <!-- left front -->
        <a-box position="-1.70 4.4 -3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-box position="-2.30 4.4 -3.5" material="shader: flat" shadow="cast: true; receive: true" scale="0.5 0.05 2.8"
            rotation="0 0 0" color="#fff" static-body></a-box>
        <a-light type="point" color="#FFF" position="-2 4.35 -3.5" scale="1 1 2"
            light="intensity: 0.35; castShadow: true; shadowRadius: 30"></a-light>





        <!-- WALLS -->
        <!-- Front Wall -->
        <a-box position="0 2.5 -10" shadow="cast: true; receive: true" scale="14 5 1" rotation="0 0 0" color="#d4bc96"
            material="roughness: 1" static-body></a-box>
        <!-- Back Wall -->
        <a-box position="0 2.5 10" shadow="cast: true; receive: true" scale="14 5 1" rotation="0 0 0" color="#d4bc96"
            material="roughness: 1" static-body></a-box>
        <!-- Right Wall -->
        <a-box position="7 2.5 0" shadow="cast: true; receive: true" scale="20 5 1" rotation="0 90 0" color="#d4bc96"
            material="roughness: 1" static-body></a-box>
        <!-- Left Wall -->
        <!-- right -->
        <a-box position="-7 2.5 -9" shadow="cast: true; receive: true" scale="3 5 1" rotation="0 90 0" color="#d4bc96"
            static-body></a-box>
        <!-- left -->
        <a-box position="-7 2.5 9" shadow="cast: true; receive: true" scale="3 5 1" rotation="0 90 0" color="#d4bc96"
            static-body></a-box>
        <!-- middleleft -->
        <a-box position="-7 2.5 -3" shadow="cast: true; receive: true" scale="3 5 1" rotation="0 90 0" color="#d4bc96"
            static-body></a-box>
        <!-- middleleft -->
        <a-box position="-7 2.5 3" shadow="cast: true; receive: true" scale="3 5 1" rotation="0 90 0" color="#d4bc96"
            static-body></a-box>
        <!-- bottom -->
        <a-box position="-7 0.5 0" shadow="cast: true; receive: true" scale="20 1 1" rotation="0 90 0" color="#d4bc96"
            static-body></a-box>
        <!-- top -->
        <a-box position="-7 4.3 0" shadow="cast: true; receive: true" scale="20 1.5 1" repeat="40 40 1"
            rotation="0 90 0" color="#d4bc96" static-body></a-box>

        <!-- Windows -->
        <!-- center -->
        <a-cylinder position="-6.5 3.65 0" material="roughness: 1" radius="0.15" height="3.5" color="#885f32"
            rotation="90 0 0"></a-cylinder>
        <a-box position="-6.75 2.3 -1.55" scale="2.7 0.2 0.7" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 1.55" material="roughness: 1" scale="2.7 0.2 0.7" rotation="0 90 90" color="#885f32"
            static-body></a-box>
        <a-box position="-6.68 1 0" scale="3.5 0.2 0.85" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 3.6 0" scale="3.2 0.2 0.7" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 0" scale="3.2 0.2 0.2" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 0" scale="3.2 0.2 0.2" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 0" scale="3.2 3 0.01" rotation="0 90 90" color="#effbff" static-body
            opacity="0.4"></a-box>
        <!-- left -->
        <a-cylinder position="-6.5 3.65 6" material="roughness: 1" radius="0.15" height="3.5" color="#885f32"
            rotation="90 0 0"></a-cylinder>
        <a-box position="-6.75 2.3 4.45" scale="2.7 0.2 0.7" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 7.55" material="roughness: 1" scale="2.7 0.2 0.7" rotation="0 90 90" color="#885f32"
            static-body></a-box>
        <a-box position="-6.68 1 6" scale="3.5 0.2 0.85" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 3.6 6" scale="3.2 0.2 0.7" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 6" scale="3.2 0.2 0.2" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 6" scale="3.2 0.2 0.2" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 6" scale="3.2 3 0.01" rotation="0 90 90" color="#effbff" static-body
            opacity="0.4"></a-box>
        <!-- right -->
        <a-cylinder position="-6.5 3.65 -6" material="roughness: 1" radius="0.15" height="3.5" color="#885f32"
            rotation="90 0 0"></a-cylinder>
        <a-box position="-6.75 2.3 -7.55" scale="2.7 0.2 0.7" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 -4.45" material="roughness: 1" scale="2.7 0.2 0.7" repeat="40 40 1"
            rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.68 1 -6" scale="3.5 0.2 0.85" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 3.6 -6" scale="3.2 0.2 0.7" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 -6" scale="3.2 0.2 0.2" rotation="0 90 0" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 -6" scale="3.2 0.2 0.2" rotation="0 90 90" color="#885f32" static-body></a-box>
        <a-box position="-6.75 2.3 -6" scale="3.2 3 0.01" rotation="0 90 90" color="#effbff" static-body
            opacity="0.4"></a-box>

        <!-- Top Wall line -->
        <a-box position="0 4.34 -9.4" scale="13 0.2 0.2" rotation="-90 0 0" color="#885f32" material="roughness: 1"
            static-body></a-box>
        <a-box position="0 4.34 9.4" scale="13 0.2 0.2" rotation="-90 0 0" color="#885f32" material="roughness: 1"
            static-body></a-box>
        <a-box position="6.4 4.34 0" scale="19 0.2 0.2" rotation="0 90 0" color="#885f32" material="roughness: 1"
            static-body></a-box>
        <a-box position="-6.4 4.34 0" scale="19 0.2 0.2" rotation="0 90 0" color="#885f32" material="roughness: 1"
            static-body></a-box>

        <!-- OBJECTS -->
        <!-- Tree -->
        <a-entity obj-model="obj: #tree-o; mtl: #tree-m" position="-20 2 0" scale="5 5 5" rotation="0 180 0"></a-entity>
        <!-- Door -->
        <a-entity obj-model="obj: #door-o; mtl: #door-m" position="6.35 0 -7" scale="3.5 3.5 3.5"
            rotation="0 90 0"></a-entity>
        <!-- Fence -->
        <a-entity obj-model="obj: #fence-o; mtl: #fence-m" position="-15 0 -20" scale="1.5 1.5 1.5"
            rotation="0 0 0"></a-entity>
        <!-- Desk -->
        <a-entity obj-model="obj: #desk-o; mtl: #desk-m" position="-2.5 0 -6.5" scale="4.5 4.5 4.5"
            rotation="0 0 0"></a-entity>
        <!-- Desk Chair -->
        <a-entity obj-model="obj: #deskchair-o; mtl: #deskchair-m" position="-5 0 -7" scale="4 4 4"
            rotation="0 230 0"></a-entity>


        <!-- Pieds de la table -->
        <a-entity dynamic-body position="-4 0 2" shadow="cast: true; receive: true">
            <a-box static-body position="0 1.3 -2" scale="3 0.1 1.8" color="#8B5A2B"></a-box>
            <a-box static-body position="0 1.18361 -2" scale="2.68 0.14 1.53" color="#8B5A2B"></a-box>
            <a-box static-body position="-1.33 0.64 -1.26" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="1.335 0.64 -1.26" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="-1.33 0.64 -2.75" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="1.335 0.64 -2.75" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
        </a-entity>

        <a-entity position="2 0 2" shadow="cast: true; receive: true">
            <a-box static-body position="0 1.3 -2" scale="3 0.1 1.8" color="#8B5A2B"></a-box>
            <a-box static-body position="0 1.18361 -2" scale="2.68 0.14 1.53" color="#8B5A2B"></a-box>
            <a-box static-body position="-1.33 0.64 -1.26" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="1.335 0.64 -1.26" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="-1.33 0.64 -2.75" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
            <a-box static-body position="1.335 0.64 -2.75" scale="0.1 1.23 0.1" color="#5D3A1A"></a-box>
        </a-entity>




        <a-box shadow=" cast: true; receive: true" position="0 4 -2" color="tomato" dynamic-body="linearDamping: 0.05"
            class="collidable" grabbable></a-box>
        <a-box shadow="cast: true; receive: true" position="0.2 3 -2.3" class="collidable" color="tomato"
            dynamic-body="linearDamping: 0.5" grabbable></a-box>
        <a-sphere shadow="cast: true; receive: true" position="-3 3 -1" color="mediumseagreen" radius="0.5"
            dynamic-body="linearDamping: 0.5; angularDamping: 0.3" grabbable></a-sphere>



        <!-- <a-box position="-1 1.6 -5" animation="property: position; to: 1 8 -10; dur: 2000; easing: linear; loop: true"
            class="collidable" color="tomato"></a-box>
        <a-entity rotation="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
            <a-sphere position="5 2 0" color="mediumseagreen"></a-sphere>
        </a-entity> -->
        <script src="script.js"></script>
    </a-scene>
</body>

</html>